<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯æ—¥è‹±æ–‡æ–°èæ·±åº¦å­¸ç¿’ï¼š2025 å¹´ 12 æœˆ 9 æ—¥</title>
    <!-- Tailwind CSS for modern, responsive design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for a clean, professional interface */
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #eef2f9; /* Soft light blue/grey background */
            min-height: 100vh;
            transition: background-color 0.3s;
        }
        .container-card {
            background-color: #ffffff;
            border-radius: 1.5rem; /* Larger border radius for softness */
            box-shadow: 0 20px 40px rgba(45, 55, 72, 0.1); /* Deeper, softer shadow */
        }
        /* Main News Tabs Styling */
        .main-tabs-container {
            background-color: #f8fafc; /* Very light background for the tab bar */
            border-radius: 1.5rem 1.5rem 0 0;
            padding: 1rem 1.5rem 0 1.5rem;
            overflow-x: auto;
            white-space: nowrap;
        }
        .main-tab-button {
            padding: 0.75rem 1.25rem;
            margin-bottom: -1px; /* Overlap border with content area */
            border-bottom: 3px solid transparent;
            font-weight: 600;
            color: #4a5568; /* Gray text for inactive */
            transition: all 0.2s ease-in-out;
        }
        .main-tab-button.active {
            color: #2b6cb0; /* Blue text for active */
            border-bottom-color: #3182ce; /* Active blue border */
            background-color: #ffffff;
            border-radius: 0.5rem 0.5rem 0 0;
        }
        /* Sub-Tabs Styling */
        .sub-tab-button {
            padding: 0.5rem 1rem;
            margin-right: 0.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            color: #4a5568;
            background-color: #edf2f7;
            transition: all 0.2s;
        }
        .sub-tab-button.active {
            color: #ffffff;
            background-color: #4c51bf; /* Indigo for active sub-tab */
            box-shadow: 0 4px 6px rgba(76, 81, 191, 0.3);
        }
        /* Quiz specific styles */
        .quiz-option {
            transition: all 0.2s;
            cursor: pointer;
        }
        .quiz-option:hover {
            background-color: #e2e8f0;
        }
        .quiz-option.selected {
            border-color: #4c51bf;
            background-color: #e0e7ff;
        }
        .quiz-option.correct {
            background-color: #c6f6d5; /* Green */
            border-color: #38a169;
            font-weight: 700;
        }
        .quiz-option.incorrect {
            background-color: #fed7d7; /* Red */
            border-color: #e53e3e;
            font-weight: 700;
        }
        /* Scrollbar styling for cleanliness */
        ::-webkit-scrollbar {
            height: 8px;
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-800 tracking-tight">æ¯æ—¥è‹±èªæ–°èæ·±åº¦å­¸ç¿’</h1>
            <p class="mt-2 text-xl text-indigo-600 font-semibold">2025 å¹´ 12 æœˆ 9 æ—¥é ­æ¢æ–°è - æ²‰æµ¸å¼å­¸ç¿’é«”é©—</p>
        </header>

        <div class="container-card">
            <!-- Main Tabs for News Topics -->
            <div id="main-tabs" class="main-tabs-container flex border-b border-gray-200">
                <!-- Tabs will be rendered here by JavaScript -->
            </div>

            <!-- Content Area -->
            <div id="content-area" class="p-6 sm:p-10">
                <!-- Content (Article, Translation, Vocab, Quiz) will be rendered here -->
                <div class="text-center p-12 text-gray-500">
                    <p class="text-2xl font-bold mb-4">å…§å®¹è¼‰å…¥ä¸­...</p>
                </div>
            </div>
        </div>

        <footer class="text-center mt-8 text-gray-500 text-sm">
            <p>Designed for an immersive English news learning experience. Powered by Gemini.</p>
        </footer>
    </div>

    <script>
        // --- DATA STRUCTURE: NEWS CONTENT ---
        const NEWS_DATA = {
            'taiwan-society-economy': {
                title: 'å°ç£ç¤¾æœƒèˆ‡ç¶“æ¿Ÿæ–°èï¼šæ°£çˆ†ã€æˆ¿å¸‚èˆ‡ GDP', 
                english: `A powerful gas explosion hit a Teishoku 8 restaurant on Chongqing Road in Banqiao just after midnight on December 8th. Four women and one man was injured as the blast blew out the second floor decor and signage. Firefighters found four leaking gas cylinders. The cause remains under investigation. Taichung's real estate market is cooling with all three major indicators falling in the third quarter. Construction starts and floor area have nearly been halved as developers face tighter credit controls and rising costs. Property transfers reached 11,010 units, driven mainly by seasonal handovers. Building permits dropped 23% to 6,679 units. Taiwan's economy surged in the third quarter with GDP growth above 8%, fueled by the AI boom but traditional manufacturers are not benefiting. A New Taipei machinery engineer told the Financial Times that rising costs, customer bankruptcies, US tariffs, low-cost Chinese competition, and an appreciating NT dollar are squeezing profits.`,
                chinese: `12 æœˆ 8 æ—¥åˆå¤œå‰›éï¼Œæ¿æ©‹å€é‡æ…¶è·¯ä¸€é–“å®šé£Ÿ 8 é¤å»³ç™¼ç”ŸçŒ›çƒˆçš„ç“¦æ–¯æ°£çˆ†ã€‚çˆ†ç‚¸ç‚¸æ¯€äº†äºŒæ¨“çš„è£æ½¢å’Œæ‹›ç‰Œï¼Œé€ æˆå››å¥³ä¸€ç”·å—å‚·ã€‚æ¶ˆé˜²éšŠå“¡ç™¼ç¾å››å€‹æ´©æ¼çš„ç“¦æ–¯é‹¼ç“¶ã€‚äº‹æ•…åŸå› ä»åœ¨èª¿æŸ¥ä¸­ã€‚å°ä¸­æˆ¿åœ°ç”¢å¸‚å ´æ­£åœ¨é™æº«ï¼Œç¬¬ä¸‰å­£æ‰€æœ‰ä¸‰å€‹ä¸»è¦æŒ‡æ¨™å‡ä¸‹é™ã€‚ç”±æ–¼é–‹ç™¼å•†é¢è‡¨æ›´åš´æ ¼çš„ä¿¡è²¸ç®¡åˆ¶å’Œä¸æ–·ä¸Šæ¼²çš„æˆæœ¬ï¼Œé–‹å·¥å»ºè¨­å’Œæ¨“åœ°æ¿é¢ç©å¹¾ä¹æ¸›åŠã€‚æˆ¿ç”¢è½‰ç§»é”åˆ° 11,010 æˆ¶ï¼Œä¸»è¦å—å­£ç¯€æ€§äº¤å±‹çš„æ¨å‹•ã€‚å»ºç¯‰è¨±å¯è­‰ä¸‹é™äº† 23%ï¼Œè‡³ 6,679 æˆ¶ã€‚å°ç£ç¶“æ¿Ÿåœ¨ç¬¬ä¸‰å­£åº¦é£†å‡ï¼ŒGDP å¢é•·è¶…é 8%ï¼Œé€™å¾—ç›Šæ–¼äººå·¥æ™ºæ…§çš„è“¬å‹ƒç™¼å±•ï¼Œä½†å‚³çµ±è£½é€ å•†ä¸¦æœªå¾ä¸­å—ç›Šã€‚ä¸€ä½æ–°åŒ—çš„æ©Ÿæ¢°å·¥ç¨‹å¸«å‘Šè¨´ã€Šé‡‘èæ™‚å ±ã€‹ï¼Œä¸æ–·ä¸Šæ¼²çš„æˆæœ¬ã€å®¢æˆ¶ç ´ç”¢ã€ç¾åœ‹é—œç¨…ã€ä½æˆæœ¬çš„ä¸­åœ‹ç«¶çˆ­ä»¥åŠæ–°å°å¹£å‡å€¼æ­£åœ¨å£“ç¸®ä»–å€‘çš„åˆ©æ½¤ã€‚`,
                vocabulary: [
                    'powerful gas explosion (n.phr.): çŒ›çƒˆçš„ç“¦æ–¯æ°£çˆ†',
                    'just after midnight (phr.): å‰›éåˆå¤œ',
                    'blew out (phr.v.): ç‚¸æ¯€ (blow out)',
                    'decor (n.): è£æ½¢ï¼Œè£é£¾',
                    'signage (n.): æ‹›ç‰Œ',
                    'leaking gas cylinders (n.phr.): æ´©æ¼çš„ç“¦æ–¯é‹¼ç“¶',
                    'remains under investigation (phr.): ä»åœ¨èª¿æŸ¥ä¸­',
                    'real estate market (n.phr.): æˆ¿åœ°ç”¢å¸‚å ´',
                    'is cooling (v.phr.): æ­£åœ¨é™æº«',
                    'major indicators (n.phr.): ä¸»è¦æŒ‡æ¨™',
                    'construction starts (n.phr.): é–‹å·¥å»ºè¨­',
                    'floor area (n.phr.): æ¨“åœ°æ¿é¢ç©',
                    'nearly been halved (phr.): å¹¾ä¹æ¸›åŠ',
                    'developers (n.): é–‹ç™¼å•†',
                    'tighter credit controls (n.phr.): æ›´åš´æ ¼çš„ä¿¡è²¸ç®¡åˆ¶',
                    'rising costs (n.phr.): ä¸æ–·ä¸Šæ¼²çš„æˆæœ¬',
                    'property transfers (n.phr.): æˆ¿ç”¢è½‰ç§» (äº¤æ˜“)',
                    'seasonal handovers (n.phr.): å­£ç¯€æ€§äº¤å±‹',
                    'building permits (n.phr.): å»ºç¯‰è¨±å¯è­‰',
                    'surged (v.): é£†å‡ï¼Œæ€¥é½ä¸Šå‡',
                    'GDP growth (n.phr.): åœ‹å…§ç”Ÿç”¢ç¸½å€¼å¢é•·',
                    'fueled by (phr.v.): å—...æ¨å‹•',
                    'AI boom (n.phr.): äººå·¥æ™ºæ…§è“¬å‹ƒç™¼å±•',
                    'traditional manufacturers (n.phr.): å‚³çµ±è£½é€ å•†',
                    'machinery engineer (n.phr.): æ©Ÿæ¢°å·¥ç¨‹å¸«',
                    'customer bankruptcies (n.phr.): å®¢æˆ¶ç ´ç”¢',
                    'US tariffs (n.phr.): ç¾åœ‹é—œç¨…',
                    'low-cost Chinese competition (n.phr.): ä½æˆæœ¬çš„ä¸­åœ‹ç«¶çˆ­',
                    'appreciating NT dollar (n.phr.): æ–°å°å¹£å‡å€¼',
                    'squeezing profits (phr.): æ“ å£“åˆ©æ½¤',
                    'Banqiao (n. proper): æ¿æ©‹ (åœ°å)',
                    'mitigating (v.ger.): æ¸›è¼•',
                    'quarter (n.): å­£åº¦',
                    'economy (n.): ç¶“æ¿Ÿ'
                ],
                quiz: [
                    { q: 'Where did the gas explosion occur?', options: ['Taichung City', 'Chongqing Road in Banqiao', 'Taipei 101 Tower', 'Kaohsiung Harbor'], answer: 'Chongqing Road in Banqiao' },
                    { q: 'What was injured in the Banqiao blast?', options: ['Four men and one woman', 'Five security guards', 'Four women and one man', 'The restaurant owner only'], answer: 'Four women and one man' },
                    { q: 'What did firefighters find at the explosion site?', options: ['A faulty electrical circuit', 'Four leaking gas cylinders', 'Illegal fireworks', 'A hidden storage facility'], answer: 'Four leaking gas cylinders' },
                    { q: 'Which city\'s real estate market is cooling?', options: ['Tainan', 'Taichung', 'New Taipei', 'Taipei'], answer: 'Taichung' },
                    { q: 'How did construction starts and floor area change in Taichung?', options: ['Nearly doubled', 'Remained stable', 'Nearly been halved', 'Dropped slightly'], answer: 'Nearly been halved' },
                    { q: 'Why are developers facing challenges in Taichung?', options: ['Too much government support', 'Tighter credit controls and rising costs', 'Lack of seasonal handovers', 'Low customer demand for housing'], answer: 'Tighter credit controls and rising costs' },
                    { q: 'What mainly drove property transfers in Taichung?', options: ['Foreign investment', 'Seasonal handovers', 'Government subsidies', 'New tax laws'], answer: 'Seasonal handovers' },
                    { q: 'What was Taiwan\'s GDP growth in the third quarter?', options: ['Below 1%', 'Around 5%', 'Above 8%', 'Exactly 7.5%'], answer: 'Above 8%' },
                    { q: 'What primarily fueled Taiwan\'s GDP surge?', options: ['The tourism boom', 'The AI boom', 'Traditional manufacturing exports', 'Agricultural output'], answer: 'The AI boom' },
                    { q: 'Which sector is *not* benefiting from the economic surge?', options: ['Semiconductor manufacturers', 'Traditional manufacturers', 'Cloud computing companies', 'Food and beverage retailers'], answer: 'Traditional manufacturers' },
                    { q: 'What did the machinery engineer cite as a challenge?', options: ['Rising costs', 'US tariffs', 'Appreciating NT dollar', 'All of the above'], answer: 'All of the above' },
                    { q: 'Which publication did the engineer speak to?', options: ['The Economist', 'Wall Street Journal', 'The Financial Times', 'Reuters'], answer: 'The Financial Times' },
                    { q: 'What effect is the appreciating NT dollar having?', options: ['Boosting exports', 'Squeezing profits', 'Lowering production costs', 'Stabilizing the market'], answer: 'Squeezing profits' },
                    { q: 'The cause of the gas explosion is currently...', options: ['Determined to be negligence', 'Closed by police', 'Remains under investigation', 'Blamed on a customer'], answer: 'Remains under investigation' },
                    { q: 'What dropped by 23% in Taichung?', options: ['Property transfers', 'Building permits', 'Floor area', 'Unemployment rates'], answer: 'Building permits' }
                ]
            },
            'netflix-warner-merger': {
                title: 'Netflix æ“¬æ”¶è³¼ Warner Bros. Discoveryï¼šå½±è¦–å·¨é ­åˆä½µ',
                english: `Netflix struck a deal to buy Warner Bros. Discovery, the Hollywood giant behind Harry Potter and HBO Max, in a $72 billion deal that would bring together two of the biggest players in television and film and potentially reshape the entertainment industry. If approved by regulators, the merger would place two of the world's biggest streaming services under the same ownership and combine Warner's television and motion picture division including DC Studios with Netflix's vast library and production arm. The proposal could draw intense antitrust scrutiny, particularly for its effects on movie making and streaming subscriptions. Mike Pru, vice president and research director at Forester, said: "Netflix is the top streaming service today. Now, combined with HBO Max, it will absolutely cement itself as the Goliath in the streaming industry." The cash and stock deal is valued at $27.75 per Warner share, giving it a total enterprise value of $82.7 billion including debt. The transaction is expected to close in the next 12 to 18 months after Warner completes its previously announced separation of its cable operations.`,
                chinese: `Netflix é”æˆå”è­°ï¼Œä»¥ 720 å„„ç¾å…ƒæ”¶è³¼å¥½èŠå¡¢å·¨é ­ Warner Bros. Discoveryï¼Œè©²å…¬å¸æ˜¯ã€Šå“ˆåˆ©æ³¢ç‰¹ã€‹å’Œ HBO Max çš„å¹•å¾Œæ¨æ‰‹ã€‚é€™é …äº¤æ˜“å°‡çµåˆé›»è¦–å’Œé›»å½±é ˜åŸŸçš„å…©å¤§å·¨é ­ï¼Œä¸¦å¯èƒ½é‡å¡‘æ•´å€‹å¨›æ¨‚ç”¢æ¥­ã€‚å¦‚æœç²å¾—ç›£ç®¡æ©Ÿæ§‹æ‰¹å‡†ï¼Œé€™æ¬¡åˆä½µå°‡ä½¿å…¨çƒæœ€å¤§çš„å…©å€‹ä¸²æµåª’é«”æœå‹™æ­¸æ–¼åŒä¸€æ‰€æœ‰æ¬Šä¹‹ä¸‹ï¼Œä¸¦å°‡è¯ç´çš„é›»è¦–å’Œé›»å½±éƒ¨é–€ï¼ˆåŒ…æ‹¬ DC Studiosï¼‰èˆ‡ Netflix é¾å¤§çš„ç‰‡åº«å’Œè£½ä½œéƒ¨é–€çµåˆèµ·ä¾†ã€‚è©²ææ¡ˆå¯èƒ½æœƒå¼•èµ·åš´æ ¼çš„åå£Ÿæ–·å¯©æŸ¥ï¼Œç‰¹åˆ¥æ˜¯å°é›»å½±è£½ä½œå’Œä¸²æµåª’é«”è¨‚é–±çš„å½±éŸ¿ã€‚Forrester å‰¯ç¸½è£å…¼ç ”ç©¶ç¸½ç›£ Mike Pru è¡¨ç¤ºï¼šã€ŒNetflix æ˜¯ç•¶ä»Šé ‚ç´šçš„ä¸²æµåª’é«”æœå‹™ã€‚ç¾åœ¨ï¼Œèˆ‡ HBO Max çµåˆå¾Œï¼Œå®ƒå°‡çµ•å°éå›ºè‡ªå·±åœ¨ä¸²æµåª’é«”ç”¢æ¥­ä¸­çš„å·¨é ­åœ°ä½ (Goliath)ã€‚ã€é€™é …ç¾é‡‘åŠ è‚¡ç¥¨äº¤æ˜“å°è¯ç´æ¯è‚¡ä¼°åƒ¹ç‚º 27.75 ç¾å…ƒï¼ŒåŒ…æ‹¬å‚µå‹™åœ¨å…§çš„ç¸½ä¼æ¥­åƒ¹å€¼ç‚º 827 å„„ç¾å…ƒã€‚é è¨ˆåœ¨è¯ç´å®Œæˆå…ˆå‰å®£å¸ƒçš„æœ‰ç·šé›»è¦–æ¥­å‹™åˆ†æ‹†å¾Œï¼Œè©²äº¤æ˜“å°‡åœ¨æœªä¾† 12 åˆ° 18 å€‹æœˆå…§å®Œæˆã€‚`,
                vocabulary: [
                    'struck a deal (phr.): é”æˆå”è­° (strike a deal)',
                    'Hollywood giant (n.phr.): å¥½èŠå¡¢å·¨é ­',
                    '$72 billion deal (n.phr.): 720 å„„ç¾å…ƒçš„äº¤æ˜“',
                    'potentially reshape (v.phr.): å¯èƒ½é‡å¡‘',
                    'entertainment industry (n.phr.): å¨›æ¨‚ç”¢æ¥­',
                    'approved by regulators (phr.): ç²å¾—ç›£ç®¡æ©Ÿæ§‹æ‰¹å‡†',
                    'the merger (n.): åˆä½µ',
                    'streaming services (n.phr.): ä¸²æµåª’é«”æœå‹™',
                    'under the same ownership (phr.): æ­¸æ–¼åŒä¸€æ‰€æœ‰æ¬Šä¹‹ä¸‹',
                    'motion picture division (n.phr.): é›»å½±éƒ¨é–€',
                    'DC Studios (n. proper): DC å·¥ä½œå®¤',
                    'vast library (n.phr.): é¾å¤§çš„ç‰‡åº«',
                    'production arm (n.phr.): è£½ä½œéƒ¨é–€',
                    'draw intense antitrust scrutiny (phr.): å¼•èµ·åš´æ ¼çš„åå£Ÿæ–·å¯©æŸ¥ (antitrust)',
                    'streaming subscriptions (n.phr.): ä¸²æµåª’é«”è¨‚é–±',
                    'cement itself as the Goliath (phr.): éå›ºå…¶ä½œç‚ºå·¨é ­çš„åœ°ä½',
                    'cash and stock deal (n.phr.): ç¾é‡‘åŠ è‚¡ç¥¨äº¤æ˜“',
                    'valued at (phr.): ä¼°åƒ¹ç‚º',
                    'enterprise value (n.phr.): ä¼æ¥­åƒ¹å€¼',
                    'including debt (phr.): åŒ…æ‹¬å‚µå‹™åœ¨å…§',
                    'the transaction (n.): äº¤æ˜“ï¼Œæ¥­å‹™',
                    'expected to close (phr.): é è¨ˆå®Œæˆ',
                    'previously announced separation (n.phr.): å…ˆå‰å®£å¸ƒçš„åˆ†æ‹†',
                    'cable operations (n.phr.): æœ‰ç·šé›»è¦–æ¥­å‹™',
                    'television (n.): é›»è¦–',
                    'film (n.): é›»å½±',
                    'vice president (n.phr.): å‰¯ç¸½è£',
                    'research director (n.phr.): ç ”ç©¶ç¸½ç›£',
                    'HBO Max (n. proper): HBO Max (ä¸²æµå¹³å°å)',
                    'acquisition (n.): æ”¶è³¼',
                    'competitor (n.): ç«¶çˆ­è€…',
                    'antitrust (adj.): åå£Ÿæ–·çš„',
                    'scrutiny (n.): å¯©æŸ¥',
                    'reshape (v.): é‡å¡‘',
                    'billion (n.): åå„„'
                ],
                quiz: [
                    { q: 'What is the reported value of the deal for Netflix to buy Warner Bros. Discovery?', options: ['$7.2 billion', '$72 billion', '$82.7 billion', '$27.75 billion'], answer: '$72 billion' },
                    { q: 'What major film franchise is Warner Bros. Discovery behind?', options: ['Star Wars', 'Harry Potter', 'The Fast and the Furious', 'James Bond'], answer: 'Harry Potter' },
                    { q: 'If approved, the merger would combine two of the biggest players in which industries?', options: ['Music and Radio', 'Television and film', 'Gaming and E-commerce', 'Print Media and Publishing'], answer: 'Television and film' },
                    { q: 'What must approve the merger before it can proceed?', options: ['Shareholders', 'The US President', 'Regulators', 'The Board of Directors'], answer: 'Regulators' },
                    { q: 'What is the proposal expected to draw from authorities?', options: ['Minimal attention', 'Intense antitrust scrutiny', 'Immediate approval', 'Financial aid'], answer: 'Intense antitrust scrutiny' },
                    { q: 'Mike Pru, a VP at Forrester, compared the combined entity to what figure?', options: ['David', 'Achilles', 'Goliath', 'Hercules'], answer: 'Goliath' },
                    { q: 'What is the nature of the deal (payment)?', options: ['Pure cash deal', 'Cash and stock deal', 'Stock swap only', 'Bond sale'], answer: 'Cash and stock deal' },
                    { q: 'What is the total enterprise value of the deal, including debt?', options: ['$72 billion', '$82.7 billion', '$27.75 billion', '$100 billion'], answer: '$82.7 billion' },
                    { q: 'What is the expected time frame for the transaction to close?', options: ['Next 6 months', 'Next 12 to 18 months', 'Within 5 years', 'It is already closed'], answer: 'Next 12 to 18 months' },
                    { q: 'What must Warner complete before the transaction can close?', options: ['A new film release', 'The separation of its cable operations', 'Hiring a new CEO', 'Acquiring another studio'], answer: 'The separation of its cable operations' },
                    { q: 'What is Netflix described as being today?', options: ['The fastest-growing service', 'The most expensive service', 'The smallest competitor', 'The top streaming service'], answer: 'The top streaming service' },
                    { q: 'What does the merger potentially reshape?', options: ['The sports league', 'The entertainment industry', 'The political landscape', 'The banking sector'], answer: 'The entertainment industry' },
                    { q: 'Which specific studio is part of Warner\'s division mentioned?', options: ['Marvel Studios', 'DC Studios', 'Pixar', 'Universal Pictures'], answer: 'DC Studios' },
                    { q: 'The scrutiny is particularly focused on its effects on what two things?', options: ['Advertising and retail', 'Movie making and streaming subscriptions', 'Gaming and music downloads', 'Broadcasting and print media'], answer: 'Movie making and streaming subscriptions' },
                    { q: 'What does "production arm" refer to?', options: ['The financial department', 'The distribution network', 'The manufacturing division', 'The filmmaking and content creation unit'], answer: 'The filmmaking and content creation unit' }
                ]
            },
            'london-tower-protest': {
                title: 'è‹±åœ‹å€«æ•¦å¡”çš‡å† ç å¯¶æŠ—è­°äº‹ä»¶ï¼šå¸åœ‹çš‡å† å±•ç¤ºæ«ƒé­å¡—æŠ¹',
                english: `The Tower of London was closed after a video appeared to show activists smearing food on a display case containing one of Britain's crown jewels, the State Crown. Police said four protesters were arrested following the incident just before 10:00 a.m. local time on Saturday. London's Metropolitan Police said officers worked closely with City of London police and security officers and four people were arrested on suspicion of criminal damage. They were taken into custody. Historic Royal Palaces said the crown jewels were not damaged during the incident and confirmed the site had reopened after closing temporarily as police investigated. Footage posted on X showed a group gathered around the display case before hurling food and dousing one side of the case with yellow liquid. One of the protesters said, "Britain is broken. We come here to the jewels of the nation to take back power." "Take Back Power," which describes itself as a civil resistance group, posted the video on X and claimed responsibility for the protest.`,
                chinese: `åœ¨ä¸€æ®µå½±ç‰‡ä¼¼ä¹é¡¯ç¤ºæœ‰æ¿€é€²åˆ†å­åœ¨ä¸€å€‹å±•ç¤ºè‹±åœ‹çš‡å† ç å¯¶ä¹‹ä¸€â€”â€”å¸åœ‹çš‡å† ï¼ˆState Crownï¼‰çš„é™³åˆ—æ«ƒä¸Šå¡—æŠ¹é£Ÿç‰©å¾Œï¼Œå€«æ•¦å¡”è¢«é—œé–‰ã€‚è­¦æ–¹è¡¨ç¤ºï¼Œå››åæŠ—è­°è€…åœ¨é€±å…­ç•¶åœ°æ™‚é–“ä¸Šåˆ 10 é»å‰ç™¼ç”Ÿçš„äº‹ä»¶å¾Œè¢«é€®æ•ã€‚å€«æ•¦è­¦å¯Ÿå»³è¡¨ç¤ºï¼Œè­¦å“¡èˆ‡å€«æ•¦å¸‚è­¦å¯Ÿå’Œä¿å®‰äººå“¡å¯†åˆ‡åˆä½œï¼Œå››äººå› æ¶‰å«Œåˆ‘äº‹æ¯€å£è¢«æ•ï¼Œä¸¦å·²è¢«æ‹˜ç•™ã€‚æ­·å²çš‡å®¶å®®æ®¿ (Historic Royal Palaces) è¡¨ç¤ºï¼Œçš‡å† ç å¯¶åœ¨äº‹ä»¶ä¸­ä¸¦æœªå—æï¼Œä¸¦è­‰å¯¦è©²åœ°é»åœ¨è­¦æ–¹èª¿æŸ¥å¾Œå·²æš«æ™‚é—œé–‰ä¸¦é‡æ–°é–‹æ”¾ã€‚åœ¨ X (å‰ Twitter) ä¸Šç™¼å¸ƒçš„å½±ç‰‡é¡¯ç¤ºï¼Œä¸€ç¾¤äººèšé›†åœ¨é™³åˆ—æ«ƒå‘¨åœï¼Œç„¶å¾ŒæŠ•æ“²é£Ÿç‰©ä¸¦å‘é™³åˆ—æ«ƒçš„ä¸€å´æ½‘ç‘é»ƒè‰²æ¶²é«”ã€‚å…¶ä¸­ä¸€åæŠ—è­°è€…èªªï¼šã€Œè‹±åœ‹å·²å´©æ½°ã€‚æˆ‘å€‘ä¾†åˆ°é€™è£¡ï¼Œåœ‹å®¶çš„ç å¯¶é¢å‰ï¼Œå¥ªå›æ¬ŠåŠ›ã€‚ã€è‡ªç¨±å…¬æ°‘æŠµæŠ—çµ„ç¹”çš„ã€Œå¥ªå›æ¬ŠåŠ›ã€ï¼ˆTake Back Powerï¼‰åœ¨ X ä¸Šç™¼å¸ƒäº†é€™æ®µå½±ç‰‡ä¸¦è²ç¨±å°æ­¤æ¬¡æŠ—è­°æ´»å‹•è² è²¬ã€‚`,
                vocabulary: [
                    'The Tower of London (n. proper): å€«æ•¦å¡” (åœ°æ¨™)',
                    'appeared to show (phr.): ä¼¼ä¹é¡¯ç¤º',
                    'activists (n.): æ¿€é€²åˆ†å­ï¼Œæ´»å‹•å®¶',
                    'smearing food (v.phr.): å¡—æŠ¹é£Ÿç‰©',
                    'display case (n.phr.): é™³åˆ—æ«ƒ',
                    'crown jewels (n.phr.): çš‡å† ç å¯¶',
                    'State Crown (n. proper): å¸åœ‹çš‡å† ',
                    'protesters (n.): æŠ—è­°è€…',
                    'arrested (v.): è¢«é€®æ•',
                    'Metropolitan Police (n. proper): å€«æ•¦è­¦å¯Ÿå»³',
                    'security officers (n.phr.): ä¿å®‰äººå“¡',
                    'on suspicion of (phr.): æ¶‰å«Œ',
                    'criminal damage (n.phr.): åˆ‘äº‹æ¯€å£',
                    'taken into custody (phr.): è¢«æ‹˜ç•™',
                    'Historic Royal Palaces (n. proper): æ­·å²çš‡å®¶å®®æ®¿ (ç®¡ç†æ©Ÿæ§‹)',
                    'were not damaged (phr.): ä¸¦æœªå—æ',
                    'reopened (v.): é‡æ–°é–‹æ”¾',
                    'closing temporarily (phr.): æš«æ™‚é—œé–‰',
                    'investigated (v.): èª¿æŸ¥',
                    'Footage (n.): å½±ç‰‡ï¼Œç‰‡æ®µ',
                    'hurling food (v.phr.): æŠ•æ“²é£Ÿç‰© (hurl)',
                    'dousing (v.ger.): æ½‘ç‘ï¼Œæ¾†çŒ (douse)',
                    'yellow liquid (n.phr.): é»ƒè‰²æ¶²é«”',
                    'Britain is broken (phr.): è‹±åœ‹å·²å´©æ½°',
                    'jewels of the nation (n.phr.): åœ‹å®¶çš„ç å¯¶',
                    'civil resistance group (n.phr.): å…¬æ°‘æŠµæŠ—çµ„ç¹”',
                    'claimed responsibility (phr.): è²ç¨±å°...è² è²¬',
                    'protest (n.): æŠ—è­°',
                    'incident (n.): äº‹ä»¶',
                    'gathered around (phr.v.): èšé›†åœ¨å‘¨åœ',
                    'demonstration (n.): ç¤ºå¨',
                    'property (n.): è²¡ç”¢',
                    'temporary (adj.): æš«æ™‚çš„',
                    'arrest (n.): é€®æ•',
                    'damage (n.): æå£'
                ],
                quiz: [
                    { q: 'What famous landmark was closed due to the incident?', options: ['Buckingham Palace', 'Tower of London', 'Westminster Abbey', 'British Museum'], answer: 'Tower of London' },
                    { q: 'What specific item was targeted in the display case?', options: ['The Coronation Sceptre', 'The Imperial Sword', 'The State Crown', 'Queen Victoria\'s Orb'], answer: 'The State Crown' },
                    { q: 'What did the activists use to smear the case?', options: ['Paint', 'Mud', 'Food', 'Glue'], answer: 'Food' },
                    { q: 'How many protesters were arrested?', options: ['Two', 'Three', 'Four', 'Five'], answer: 'Four' },
                    { q: 'On suspicion of what crime were the protesters arrested?', options: ['Theft', 'Assault', 'Criminal damage', 'Treason'], answer: 'Criminal damage' },
                    { q: 'What organization manages the historic site?', options: ['The British Government', 'The Crown Estate', 'Historic Royal Palaces', 'The National Trust'], answer: 'Historic Royal Palaces' },
                    { q: 'Were the crown jewels damaged during the incident?', options: ['Yes, severely', 'Yes, slightly', 'No, they were not damaged', 'The report is inconclusive'], answer: 'No, they were not damaged' },
                    { q: 'What platform was the footage of the protest posted on?', options: ['Instagram', 'Facebook', 'TikTok', 'X'], answer: 'X' },
                    { q: 'Besides hurling food, what else did the footage show the group doing?', options: ['Chanting slogans loudly', 'Breaking the glass', 'Dousing one side with yellow liquid', 'Trying to open the case'], answer: 'Dousing one side with yellow liquid' },
                    { q: 'What specific phrase did one of the protesters use to describe Britain?', options: ['"Britain is great"', '"Britain is broken"', '"Britain needs change"', '"Britain is free"'], answer: '"Britain is broken"' },
                    { q: 'What is the name of the group that claimed responsibility?', options: ['Greenpeace', 'Just Stop Oil', 'Take Back Power', 'Extinction Rebellion'], answer: 'Take Back Power' },
                    { q: 'The group "Take Back Power" describes itself as what type of group?', options: ['A political party', 'A civil resistance group', 'A humanitarian aid organization', 'A cultural society'], answer: 'A civil resistance group' },
                    { q: 'What time did the incident occur on Saturday?', options: ['Just after 5:00 p.m.', 'Just before 10:00 a.m.', 'Around noon', 'Late at night'], answer: 'Just before 10:00 a.m.' },
                    { q: 'What does "taken into custody" mean?', options: ['Released with a warning', 'Taken to a hospital', 'Taken to a police station (arrested)', 'Given a fine'], answer: 'Taken to a police station (arrested)' },
                    { q: 'Why did the site close temporarily?', options: ['Due to a power outage', 'As police investigated', 'For a scheduled event', 'To clean the jewels'], answer: 'As police investigated' }
                ]
            },
            'celebrity-romance': {
                title: 'Katy Perry èˆ‡ Justin Trudeau å®˜å®£æˆ€æƒ…ï¼šæ—¥æœ¬ä¹‹æ—…ç…§ç‰‡æ›å…‰',
                english: `Katy Perry and former Canadian Prime Minister Justin Trudeau have gone Instagram official after the singer posted a series of photographs and videos from their trip to Japan. In one picture, Perry and Trudeau were seen smiling for a selfie with their faces touching. In another video, the pair are seen trying sushi. Neither Perry nor Trudeau has publicly commented on their relationship, but speculation has been growing for months with multiple pictures of the two together. Trudeau was seen attending Perry's concert earlier this year, fueling rumors of a romance with the pop star. Perry was visiting Japan as part of her Global Lifetimes tour. She accompanied her Instagram carousel with the caption, "Tokyo Times on tour and more." Earlier this week, Trudeau also reposted a photograph of the pair together alongside the former Prime Minister of Japan, Fumio Kishida, and his wife, Yuko. Last month, the pair appeared to confirm their relationship after being photographed holding hands at an event in Paris. The appearance in Paris coincided with Perry's 41st birthday and appeared to mark their first public outing as a couple.`,
                chinese: `æ­Œæ‰‹å‡±è’‚Â·ä½©èŠ® (Katy Perry) åœ¨ Instagram ä¸Šç™¼å¸ƒäº†ä¸€ç³»åˆ—ä»–å€‘æ—¥æœ¬ä¹‹æ—…çš„ç…§ç‰‡å’Œå½±ç‰‡å¾Œï¼Œèˆ‡åŠ æ‹¿å¤§å‰ç¸½ç†è³ˆæ–¯æ±€Â·æœé­¯é“ (Justin Trudeau) æ­£å¼å…¬é–‹äº†æˆ€æƒ…ã€‚åœ¨ä¸€å¼µç…§ç‰‡ä¸­ï¼Œä½©èŠ®å’Œæœé­¯é“å¾®ç¬‘è‘—æ‹è‡ªæ‹ï¼Œè‡‰é °è²¼åœ¨ä¸€èµ·ã€‚åœ¨å¦ä¸€æ®µå½±ç‰‡ä¸­ï¼Œå…©äººæ­£åœ¨å˜—è©¦å£½å¸ã€‚ä½©èŠ®å’Œæœé­¯é“éƒ½æ²’æœ‰å…¬é–‹è©•è«–ä»–å€‘çš„é—œä¿‚ï¼Œä½†æ•¸æœˆä»¥ä¾†ï¼Œéš¨è‘—å…©äººå¤šå¼µåˆå½±çš„å‡ºç¾ï¼Œå¤–ç•Œçš„çŒœæ¸¬ä¸æ–·å¢åŠ ã€‚æœé­¯é“ä»Šå¹´æ—©äº›æ™‚å€™æ›¾è¢«çœ‹åˆ°å‡ºå¸­ä½©èŠ®çš„æ¼”å”±æœƒï¼Œé€™åŠ åŠ‡äº†æœ‰é—œé€™ä½æµè¡Œæ­Œæ˜Ÿæˆ€æƒ…çš„å‚³è¨€ã€‚ä½©èŠ®æ­¤æ¬¡è¨ªå•æ—¥æœ¬æ˜¯å¥¹ã€Œå…¨çƒæ™‚å…‰ä¹‹æ—…ã€ï¼ˆGlobal Lifetimes tourï¼‰çš„ä¸€éƒ¨åˆ†ã€‚å¥¹åœ¨ Instagram è¼ªæ’­è²¼æ–‡ä¸­é™„ä¸Šçš„æ¨™é¡Œæ˜¯ã€Œå·¡æ¼”ä¸­çš„æ±äº¬æ™‚å…‰ç­‰ç­‰ã€ã€‚æœ¬é€±æ—©äº›æ™‚å€™ï¼Œæœé­¯é“é‚„è½‰ç™¼äº†ä¸€å¼µå…©äººå’Œæ—¥æœ¬å‰é¦–ç›¸å²¸ç”°æ–‡é›„åŠå…¶å¤«äººè£•å­ (Yuko) çš„åˆå½±ã€‚ä¸Šå€‹æœˆï¼Œå…©äººåœ¨å·´é»çš„ä¸€æ¬¡æ´»å‹•ä¸­è¢«æ‹åˆ°æ‰‹ç‰½æ‰‹ï¼Œä¼¼ä¹è­‰å¯¦äº†ä»–å€‘çš„é—œä¿‚ã€‚é€™æ¬¡åœ¨å·´é»çš„éœ²é¢æ°é€¢ä½©èŠ®çš„ 41 æ­²ç”Ÿæ—¥ï¼Œä¼¼ä¹æ¨™èªŒè‘—ä»–å€‘ä½œç‚ºä¸€å°æƒ…ä¾¶é¦–æ¬¡å…¬é–‹éœ²é¢ã€‚`,
                vocabulary: [
                    'former Canadian Prime Minister (n.phr.): åŠ æ‹¿å¤§å‰ç¸½ç†',
                    'gone Instagram official (phr.): é€é Instagram æ­£å¼å…¬é–‹æˆ€æƒ…',
                    'posted a series of (phr.): ç™¼å¸ƒäº†ä¸€ç³»åˆ—',
                    'trip to Japan (n.phr.): æ—¥æœ¬ä¹‹æ—…',
                    'smiling for a selfie (phr.): å¾®ç¬‘è‘—æ‹è‡ªæ‹',
                    'faces touching (phr.): è‡‰é °è²¼åœ¨ä¸€èµ·',
                    'trying sushi (phr.): å˜—è©¦å£½å¸',
                    'publicly commented on (phr.): å…¬é–‹è©•è«– (comment on)',
                    'speculation has been growing (phr.): çŒœæ¸¬ä¸æ–·å¢åŠ ',
                    'fueling rumors (v.phr.): åŠ åŠ‡å‚³è¨€',
                    'romance with the pop star (n.phr.): èˆ‡é€™ä½æµè¡Œæ­Œæ˜Ÿçš„æˆ€æƒ…',
                    'Global Lifetimes tour (n. proper): ã€Œå…¨çƒæ™‚å…‰ä¹‹æ—…ã€ï¼ˆæ¼”å”±æœƒåç¨±ï¼‰',
                    'accompanied (v.): ä¼´éš¨ï¼Œé™„ä¸Š',
                    'Instagram carousel (n.phr.): Instagram è¼ªæ’­è²¼æ–‡',
                    'reposted a photograph (phr.): è½‰ç™¼äº†ä¸€å¼µç…§ç‰‡',
                    'former Prime Minister of Japan (n.phr.): æ—¥æœ¬å‰é¦–ç›¸',
                    'appeared to confirm (phr.): ä¼¼ä¹è­‰å¯¦',
                    'holding hands (phr.): æ‰‹ç‰½æ‰‹',
                    'coincided with (phr.v.): æ°é€¢',
                    'public outing (n.phr.): å…¬é–‹éœ²é¢',
                    'as a couple (phr.): ä½œç‚ºä¸€å°æƒ…ä¾¶',
                    'singer (n.): æ­Œæ‰‹',
                    'pop star (n.phr.): æµè¡Œæ­Œæ˜Ÿ',
                    'concert (n.): æ¼”å”±æœƒ',
                    'speculation (n.): çŒœæ¸¬',
                    'rumors (n.): å‚³è¨€',
                    'caption (n.): æ¨™é¡Œï¼Œèªªæ˜æ–‡å­—',
                    'attendance (n.): å‡ºå¸­',
                    'event (n.): æ´»å‹•',
                    'birthday (n.): ç”Ÿæ—¥',
                    'together (adv.): ä¸€èµ·',
                    'relationship (n.): é—œä¿‚',
                    'official (adj.): å®˜æ–¹çš„ï¼Œæ­£å¼çš„',
                    'selfie (n.): è‡ªæ‹'
                ],
                quiz: [
                    { q: 'Who is the male figure in the reported relationship?', options: ['Former US President', 'Former Canadian Prime Minister', 'Current Japanese PM', 'A famous actor'], answer: 'Former Canadian Prime Minister' },
                    { q: 'What platform did they use to "go official"?', options: ['Twitter (X)', 'Facebook', 'TikTok', 'Instagram'], answer: 'Instagram' },
                    { q: 'Where did the series of photographs and videos primarily take place?', options: ['Paris', 'London', 'Japan', 'Los Angeles'], answer: 'Japan' },
                    { q: 'What action were they seen doing in one video?', options: ['Singing karaoke', 'Trying sushi', 'Shopping for clothes', 'Visiting a museum'], answer: 'Trying sushi' },
                    { q: 'How long has speculation about their relationship been growing?', options: ['For weeks', 'For months', 'For years', 'Since last week'], answer: 'For months' },
                    { q: 'What action of Trudeau\'s earlier this year fueled the rumors?', options: ['Attending Perry\'s concert', 'Appearing on her TV show', 'Releasing a joint statement', 'Collaborating on a song'], answer: 'Attending Perry\'s concert' },
                    { q: 'What is the name of Katy Perry\'s tour mentioned?', options: ['The Prism Tour', 'Teenage Dream Tour', 'Witness Tour', 'Global Lifetimes tour'], answer: 'Global Lifetimes tour' },
                    { q: 'What did Perry accompany her Instagram carousel with?', options: ['A love poem', 'The lyrics to a song', 'The caption, "Tokyo Times on tour and more."', 'An engagement announcement'], answer: 'The caption, "Tokyo Times on tour and more."' },
                    { q: 'Who else did Trudeau repost a photo with, besides Perry?', options: ['The Current US President', 'The Former PM of Japan', 'The King of England', 'A famous chef'], answer: 'The Former PM of Japan' },
                    { q: 'Where were they photographed holding hands last month?', options: ['New York', 'Paris', 'Tokyo', 'Ottawa'], answer: 'Paris' },
                    { q: 'What occasion did the Paris appearance coincide with?', options: ['Trudeau\'s birthday', 'Perry\'s 41st birthday', 'The New Year', 'A political summit'], answer: 'Perry\'s 41st birthday' },
                    { q: 'What did the Paris appearance mark for them?', options: ['Their engagement', 'Their breakup', 'Their first public outing as a couple', 'The start of their tour'], answer: 'Their first public outing as a couple' },
                    { q: 'What does "gone Instagram official" mean?', options: ['They started following each other', 'They posted a picture of themselves together to confirm the relationship', 'They officially signed a contract', 'They joined a new app'], answer: 'They posted a picture of themselves together to confirm the relationship' },
                    { q: 'The selfie showed them doing what with their faces?', options: ['Kissing', 'Touching', 'Looking away', 'Wearing masks'], answer: 'Touching' },
                    { q: 'Have either Perry or Trudeau publicly commented on their relationship?', options: ['Yes, only Perry has', 'Yes, both have commented extensively', 'No, neither has publicly commented', 'Trudeau commented, but Perry hasn\'t'], answer: 'No, neither has publicly commented' }
                ]
            }
        };

        // --- STATE MANAGEMENT ---
        // Sets the default state to the first item in the NEWS_DATA object
        let currentTopicId = Object.keys(NEWS_DATA)[0]; 
        let currentSubTab = 'article'; // Default view: article, translation, vocabulary, quiz
        let quizState = {}; // Stores answers: { topicId: { questionIndex: selectedOption } }
        let quizResult = {}; // Stores results: { topicId: { score: N, total: M } }


        // --- CORE RENDERING FUNCTIONS ---

        /**
         * Renders the main topic tabs at the top of the page.
         */
        function renderTabs() {
            const tabsContainer = document.getElementById('main-tabs');
            // If no data, show a message
            if (Object.keys(NEWS_DATA).length === 0) {
                tabsContainer.innerHTML = '<p class="p-4 text-center text-red-500 font-semibold">ç„¡æ–°èè³‡æ–™å¯é¡¯ç¤ºï¼Œè«‹æ›´æ–° NEWS_DATA è®Šæ•¸ã€‚</p>';
                return;
            }

            tabsContainer.innerHTML = Object.entries(NEWS_DATA).map(([id, data]) => {
                // Chinese title extraction from the English/Chinese summary line (or just use the title field)
                const tabTitle = data.title.split('ï¼š')[0]; 
                const isActive = id === currentTopicId ? 'active' : '';
                return `
                    <button 
                        class="main-tab-button ${isActive}" 
                        onclick="changeTopic('${id}')"
                    >
                        ${tabTitle}
                    </button>
                `;
            }).join('');
        }

        /**
         * Renders the content based on the current topic and sub-tab.
         */
        function renderContent() {
            const contentArea = document.getElementById('content-area');
            const data = NEWS_DATA[currentTopicId];
            
            if (!data) {
                contentArea.innerHTML = '<h2 class="text-3xl font-bold text-gray-800 mb-6">éŒ¯èª¤ï¼šæ‰¾ä¸åˆ°æ–°èå…§å®¹</h2><p>è«‹æª¢æŸ¥æ‚¨çš„æ–°è ID è¨­å®šã€‚</p>';
                return;
            }
            
            // 1. Render Sub-Tabs Menu
            const quizLength = data.quiz ? data.quiz.length : 0;
            const subTabsHTML = `
                <div class="mb-6 flex space-x-2 border-b pb-4 border-gray-100 overflow-x-auto">
                    <button class="sub-tab-button ${currentSubTab === 'article' ? 'active' : ''}" onclick="changeSubTab('article')">ğŸ“° è‹±æ–‡åŸæ–‡</button>
                    <button class="sub-tab-button ${currentSubTab === 'translation' ? 'active' : ''}" onclick="changeSubTab('translation')">ğŸ‡¹ğŸ‡¼ ä¸­æ–‡ç¿»è­¯</button>
                    <button class="sub-tab-button ${currentSubTab === 'vocabulary' ? 'active' : ''}" onclick="changeSubTab('vocabulary')">ğŸ“š å–®å­—åº«</button>
                    <button class="sub-tab-button ${currentSubTab === 'quiz' ? 'active' : ''}" onclick="initQuiz()">ğŸ“ æ¸¬é©— (${quizLength} é¡Œ)</button>
                </div>
            `;
            
            let contentHTML = '';

            switch (currentSubTab) {
                case 'article':
                    contentHTML = renderArticle(data.english, data.title);
                    break;
                case 'translation':
                    contentHTML = renderTranslation(data.chinese, data.title);
                    break;
                case 'vocabulary':
                    contentHTML = renderVocabulary(data.vocabulary, data.title);
                    break;
                case 'quiz':
                    contentHTML = renderQuiz(currentTopicId, data.quiz, data.title);
                    break;
            }

            contentArea.innerHTML = subTabsHTML + contentHTML;

            // Ensure quiz answer state is maintained on re-render
            if (currentSubTab === 'quiz') {
                updateQuizDisplay(currentTopicId, data.quiz);
            }
        }

        /**
         * Renders the original English article.
         */
        function renderArticle(text, title) {
            return `
                <h2 class="text-3xl font-bold text-gray-800 mb-6">${title}</h2>
                <div class="prose max-w-none text-lg text-gray-700 leading-relaxed p-4 bg-gray-50 rounded-lg shadow-inner">
                    <p class="whitespace-pre-wrap">${text.trim()}</p>
                </div>
                <div class="mt-6 text-center">
                    <div class="text-sm text-gray-500 mb-2">é»æ“Šä¸‹æ–¹æŒ‰éˆ•ï¼Œé–‹å§‹æ·±åº¦å­¸ç¿’ï¼š</div>
                    <button 
                        class="px-6 py-3 bg-indigo-500 text-white font-semibold rounded-full shadow-lg hover:bg-indigo-600 transition duration-200 ease-in-out"
                        onclick="changeSubTab('translation')"
                    >
                        ğŸ‡¹ğŸ‡¼ å‰å¾€ä¸­æ–‡ç¿»è­¯ (See Translation)
                    </button>
                </div>
            `;
        }

        /**
         * Renders the Chinese translation.
         */
        function renderTranslation(text, title) {
            return `
                <h2 class="text-3xl font-bold text-gray-800 mb-6">${title} - ä¸­æ–‡ç¿»è­¯</h2>
                <div class="prose max-w-none text-lg text-gray-700 leading-relaxed p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg shadow-inner">
                    <p class="whitespace-pre-wrap">${text.trim()}</p>
                </div>
                <div class="mt-6 text-center">
                    <div class="text-sm text-gray-500 mb-2">ç¹¼çºŒå¼·åŒ–è©å½™èˆ‡ç†è§£ï¼š</div>
                    <button 
                        class="px-6 py-3 bg-green-500 text-white font-semibold rounded-full shadow-lg hover:bg-green-600 transition duration-200 ease-in-out"
                        onclick="changeSubTab('vocabulary')"
                    >
                        ğŸ“– å‰å¾€å–®å­—åº«è¤‡ç¿’ (Review Vocabulary)
                    </button>
                </div>
            `;
        }

        /**
         * Renders the vocabulary list.
         */
        function renderVocabulary(vocabArray, title) {
            const listItems = vocabArray.map(item => {
                const parts = item.split(': ');
                return `<li class="p-3 bg-white rounded-lg shadow-sm border border-gray-100">
                    <span class="font-semibold text-indigo-700">${parts[0]}</span> 
                    <span class="text-gray-500 text-sm italic">${parts[1]}</span>
                </li>`;
            }).join('');

            return `
                <h2 class="text-3xl font-bold text-gray-800 mb-6">${title} - æ ¸å¿ƒå–®å­—èˆ‡ç‰‡èª (å…± ${vocabArray.length} å€‹)</h2>
                <p class="text-gray-600 mb-6">æŒæ¡é€™äº›é—œéµè©å½™ï¼Œå°‡æœ‰åŠ©æ–¼æ‚¨å®Œå…¨ç†è§£æ–°èå…§å®¹ã€‚</p>
                <ul class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                    ${listItems}
                </ul>
                <div class="mt-8 text-center">
                    <div class="text-sm text-gray-500 mb-2">æº–å‚™å¥½æ¸¬è©¦æ‚¨çš„ç†è§£åŠ›äº†å—ï¼Ÿ</div>
                    <button 
                        class="px-6 py-3 bg-red-500 text-white font-semibold rounded-full shadow-lg hover:bg-red-600 transition duration-200 ease-in-out"
                        onclick="initQuiz()"
                    >
                        ğŸ“ é–‹å§‹æ¸¬é©— (Start Quiz)
                    </button>
                </div>
            `;
        }

        /**
         * Renders the quiz interface.
         */
        function renderQuiz(topicId, quizQuestions, title) {
            const currentQuizState = quizState[topicId] || {};
            const result = quizResult[topicId];
            
            if (!quizQuestions || quizQuestions.length === 0) {
                return `<h2 class="text-3xl font-bold text-gray-800 mb-6">${title} - å…§å®¹æ¸¬é©—</h2>
                        <div class="text-center p-8 bg-yellow-100 rounded-xl mb-8 border-4 border-yellow-500">
                            <p class="text-xl font-extrabold text-yellow-800">â— æ¸¬é©—é¡Œåº«å°šæœªå»ºç«‹ â—</p>
                            <p class="text-lg mt-2 text-yellow-700">è«‹ç¢ºä¿ NEWS_DATA ä¸­åŒ…å«è‡³å°‘ 15 é¡Œæ¸¬é©—é¡Œã€‚</p>
                        </div>`;
            }

            const questionsHTML = quizQuestions.map((q, index) => {
                const selected = currentQuizState[index];
                const isSubmitted = result !== undefined;
                const correctAnswer = q.answer;
                
                const optionsHTML = q.options.map((option, optIndex) => {
                    let classes = 'quiz-option p-4 my-2 border border-gray-300 rounded-lg block text-left';
                    let isCurrentSelected = selected === option;

                    if (isSubmitted) {
                        if (option === correctAnswer) {
                            classes += ' correct'; // Correct answer
                        } else if (isCurrentSelected && option !== correctAnswer) {
                            classes += ' incorrect'; // User selected, but incorrect
                        }
                    } else if (isCurrentSelected) {
                        classes += ' selected'; // User selected, but not submitted
                    }

                    // Escape single quotes in option text for selectOption function call
                    const escapedOption = option.replace(/'/g, "\\'");

                    return `
                        <div 
                            class="${classes}" 
                            data-q-index="${index}" 
                            data-option="${option}"
                            onclick="selectOption('${topicId}', ${index}, '${escapedOption}')"
                        >
                            <span class="font-bold mr-3">${String.fromCharCode(65 + optIndex)}.</span> ${option}
                            ${isSubmitted && option === correctAnswer ? '<span class="ml-2 text-green-700 font-bold">(æ­£ç¢ºç­”æ¡ˆ)</span>' : ''}
                        </div>
                    `;
                }).join('');

                return `
                    <div class="mb-8 p-6 bg-white rounded-xl shadow-md border-t-4 border-indigo-500">
                        <p class="text-xl font-bold text-gray-800 mb-4">Q${index + 1}: ${q.q}</p>
                        ${optionsHTML}
                    </div>
                `;
            }).join('');

            const resultHTML = result ? `
                <div class="text-center p-8 bg-indigo-100 rounded-xl mb-8 border-4 border-indigo-500">
                    <h3 class="text-3xl font-extrabold text-indigo-700 mb-2">æ¸¬é©—çµæœ</h3>
                    <p class="text-4xl font-black text-indigo-900">${result.score} / ${result.total}</p>
                    <p class="text-lg mt-3 text-indigo-800">æ‚¨ç­”å°äº† ${result.score} é¡Œã€‚è«‹æª¢è¦–ä¸‹æ–¹æ¨™è¨»çš„ç­”æ¡ˆï¼</p>
                    <button 
                        class="mt-4 px-6 py-2 bg-yellow-500 text-white font-semibold rounded-full hover:bg-yellow-600 transition"
                        onclick="initQuiz(true)"
                    >
                        ğŸ”„ é‡ç½®æ¸¬é©—
                    </button>
                </div>
            ` : '';

            const submitButton = result === undefined ? `
                <button 
                    id="submit-quiz-button"
                    class="w-full sm:w-auto px-8 py-3 bg-red-600 text-white text-xl font-bold rounded-xl shadow-lg hover:bg-red-700 transition duration-300 disabled:opacity-50"
                    onclick="submitQuizAnswer('${topicId}')"
                    disabled
                >
                    é€å‡ºç­”æ¡ˆä¸¦æŸ¥çœ‹çµæœ
                </button>
            ` : '';

            return `
                <h2 class="text-3xl font-bold text-gray-800 mb-6">${title} - å…§å®¹æ¸¬é©—</h2>
                ${resultHTML}
                <div id="quiz-questions">
                    ${questionsHTML}
                </div>
                <div class="mt-8 text-center">
                    ${submitButton}
                    <p id="quiz-message" class="mt-4 text-red-500 font-semibold"></p>
                </div>
            `;
        }


        // --- QUIZ LOGIC ---

        /**
         * Initializes or resets the quiz state for a topic.
         * @param {boolean} forceReset - Whether to force a full reset.
         */
        function initQuiz(forceReset = false) {
            const topicId = currentTopicId;
            const data = NEWS_DATA[topicId];
            if (!data || !data.quiz || data.quiz.length === 0) {
                 currentSubTab = 'quiz';
                 renderContent();
                 return;
            }

            // If we are already on the quiz tab and not forcing a reset, just ensure correct tab is selected
            if (!forceReset && currentSubTab === 'quiz') {
                return;
            }
            
            // If the user manually clicks the tab, or requests a full reset, clear results
            quizState[topicId] = {};
            quizResult[topicId] = undefined;
            currentSubTab = 'quiz';
            renderContent();
        }

        /**
         * Selects an option for a question.
         */
        function selectOption(topicId, questionIndex, selectedOption) {
            if (quizResult[topicId] !== undefined) return; // Cannot change after submission
            
            quizState[topicId] = quizState[topicId] || {};
            const currentSelection = quizState[topicId][questionIndex];

            // Toggle selection logic
            if (currentSelection === selectedOption) {
                delete quizState[topicId][questionIndex];
            } else {
                quizState[topicId][questionIndex] = selectedOption;
            }
            
            updateQuizDisplay(topicId, NEWS_DATA[topicId].quiz);
        }

        /**
         * Submits the quiz answers and displays the results.
         */
        function submitQuizAnswer(topicId) {
            const questions = NEWS_DATA[topicId].quiz;
            const answers = quizState[topicId] || {};
            let score = 0;
            const total = questions.length;

            if (Object.keys(answers).length !== total) {
                document.getElementById('quiz-message').textContent = `è«‹å›ç­”æ‰€æœ‰ ${total} é¡Œå•é¡Œï¼`;
                return;
            }
            document.getElementById('quiz-message').textContent = '';

            questions.forEach((q, index) => {
                const selected = answers[index];
                if (selected === q.answer) {
                    score++;
                }
            });

            quizResult[topicId] = { score, total };
            renderContent(); // Re-render to show results and correct/incorrect indicators
        }
        
        /**
         * Helper function to update the visual state of the quiz without full re-render.
         */
        function updateQuizDisplay(topicId, quizQuestions) {
            const currentQuizState = quizState[topicId] || {};
            const result = quizResult[topicId];
            const totalQuestions = quizQuestions.length;
            const answeredCount = Object.keys(currentQuizState).length;
            const submitButton = document.getElementById('submit-quiz-button');
            const quizMessage = document.getElementById('quiz-message');

            if (submitButton) {
                submitButton.disabled = answeredCount !== totalQuestions;
                if (answeredCount === totalQuestions) {
                    quizMessage.textContent = 'æ‰€æœ‰å•é¡Œå·²å›ç­”ã€‚';
                } else {
                    quizMessage.textContent = `è«‹å®Œæˆæ‰€æœ‰å•é¡Œ (å·²å®Œæˆ: ${answeredCount}/${totalQuestions})`;
                }
            }

            // Update classes for selection feedback if not submitted
            if (result === undefined) {
                document.querySelectorAll('.quiz-option').forEach(element => {
                    const qIndex = parseInt(element.getAttribute('data-q-index'));
                    const option = element.getAttribute('data-option');
                    
                    element.classList.remove('selected');
                    if (currentQuizState[qIndex] === option) {
                        element.classList.add('selected');
                    }
                });
            }
        }


        // --- Event Handlers (exposed globally) ---

        /**
         * Changes the main news topic displayed.
         */
        function changeTopic(newTopicId) {
            if (currentTopicId === newTopicId) return;
            currentTopicId = newTopicId;
            currentSubTab = 'article'; // Reset to Article view on topic change
            renderTabs();
            renderContent();
        }

        /**
         * Changes the sub-tab (Article, Translation, Vocabulary, Quiz) within the current topic.
         */
        function changeSubTab(newSubTab) {
            currentSubTab = newSubTab;
            renderContent();
        }


        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            // Check if there is any data to load
            if (Object.keys(NEWS_DATA).length > 0) {
                // Ensure the current topic is valid if data exists
                if (!NEWS_DATA[currentTopicId]) {
                    currentTopicId = Object.keys(NEWS_DATA)[0];
                }
                renderTabs();
                renderContent();
            } else {
                 // No data, show only the default message (already in HTML)
                 document.getElementById('content-area').innerHTML = '<div class="text-center p-12 text-gray-500"><p class="text-2xl font-bold mb-4">æ­¡è¿ä½¿ç”¨è‹±æ–‡æ–°èå­¸ç¿’æ¨¡æ¿ï¼</p><p class="text-lg">è«‹æä¾›æœ€æ–°çš„è‹±æ–‡æ–°èï¼Œæˆ‘æœƒå°‡å…§å®¹æ›¿æ›è‡³ä¸‹æ–¹çš„ <code class="bg-gray-200 p-1 rounded">NEWS_DATA</code> è®Šæ•¸ä¸­ã€‚</p><p class="text-sm mt-4 text-red-500">ç•¶å‰ <code class="bg-gray-200 p-1 rounded">NEWS_DATA</code> åƒ…åŒ…å«æ¨¡æ¿ç¯„ä¾‹ã€‚</p></div>';
            }
            
            // Expose functions globally for use in HTML event handlers
            window.changeTopic = changeTopic;
            window.changeSubTab = changeSubTab;
            window.selectOption = selectOption;
            window.submitQuizAnswer = submitQuizAnswer;
            window.initQuiz = initQuiz;
        });
    </script>
</body>
</html>
